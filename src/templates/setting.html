<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß - IEP Smart Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 min-h-screen flex flex-col font-sans">

    <nav class="bg-indigo-900 text-white shadow-lg mb-8 font-sans">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center text-sm font-medium">
            <div class="flex items-center space-x-10">
                <div class="font-bold text-xl uppercase italic tracking-tighter border-r border-indigo-700 pr-10">
                    IEP Smart Assistant
                </div>

                <div class="flex space-x-8">
                    <a href="{{ url_for('chatbot_page') }}"
                        class="{% if request.endpoint == 'chatbot_page' %}border-b-2 border-white pb-1{% else %}hover:text-indigo-300 transition{% endif %}">Chatbot
                        AI</a>

                    <a href="{{ url_for('student_list_page') }}"
                        class="{% if request.endpoint == 'student_list_page' %}border-b-2 border-white pb-1{% else %}hover:text-indigo-300 transition{% endif %}">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>

                    {% if session['permission'] == 'Admin' %}
                    <a href="{{ url_for('import_page') }}"
                        class="{% if request.endpoint == 'import_page' %}border-b-2 border-white pb-1{% else %}hover:text-indigo-300 transition{% endif %}">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>

                    <a href="{{ url_for('admin_dashboard') }}"
                        class="{% if request.endpoint == 'admin_dashboard' %}border-b-2 border-white pb-1{% else %}hover:text-indigo-300 transition{% endif %}">Dashboard</a>

                    <a href="{{ url_for('register_page') }}"
                        class="{% if request.endpoint == 'register_page' %}border-b-2 border-white pb-1{% else %}hover:text-indigo-300 transition{% endif %}">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</a>
                    {% endif %}
                </div>
            </div>

            <div class="relative">
                <button onclick="toggleDropdown()"
                    class="bg-indigo-800 px-4 py-2 rounded-xl text-xs font-bold hover:bg-indigo-700 transition flex items-center shadow-md outline-none">
                    {{ session['displayname'] }} <span class="ml-2 text-[10px]">‚ñº</span>
                </button>
                <div id="user-menu"
                    class="absolute right-0 w-48 mt-2 py-2 bg-white rounded-xl shadow-xl hidden z-50 text-slate-700 border border-slate-100">
                    <a href="{{ url_for('setting_page') }}" class="block px-4 py-2 hover:bg-indigo-50 transition">‚öôÔ∏è
                        ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Settings)</a>
                    <hr class="my-1 border-slate-100">
                    <a href="/logout"
                        class="block px-4 py-2 text-sm text-rose-600 font-bold hover:bg-rose-50 transition">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex items-center justify-center flex-grow px-4 pb-12">
        <div class="bg-white p-10 rounded-[2.5rem] shadow-2xl max-w-lg w-full border border-slate-100">
            <div class="text-center mb-8">
                <div class="inline-block p-4 bg-indigo-50 rounded-3xl mb-4 text-3xl">‚öôÔ∏è</div>
                <h2 class="text-3xl font-extrabold text-slate-800">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h2>
                <p class="text-slate-400 text-sm mt-1 uppercase tracking-widest font-bold">Account Settings</p>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}{% for category, message in messages %}
            <div
                class="bg-emerald-50 border-l-4 border-emerald-500 text-emerald-700 p-4 mb-6 rounded-r-lg text-xs font-bold">
                {{ message }}
            </div>
            {% endfor %}{% endif %}
            {% endwith %}

            <form action="/update_settings" method="POST" class="space-y-6">
                <div>
                    <label
                        class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 ml-1">Username
                        (ID)</label>
                    <input type="text" value="{{ session['username'] }}" disabled
                        class="w-full border border-slate-200 rounded-2xl p-4 bg-slate-50 text-slate-400 font-bold text-sm cursor-not-allowed outline-none shadow-inner">
                </div>

                <div>
                    <label
                        class="block text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-1 ml-1">Display
                        Name (‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•)</label>
                    {% if session['permission'] == 'Admin' %}
                    <input type="text" name="displayname" value="{{ session['displayname'] }}" required
                        class="w-full border border-slate-200 rounded-2xl p-4 outline-none focus:ring-4 focus:ring-indigo-100 bg-white transition-all font-medium">
                    {% else %}
                    <input type="text" value="{{ session['displayname'] }}" readonly
                        class="w-full border border-slate-200 rounded-2xl p-4 bg-slate-100 text-slate-400 font-bold text-sm cursor-not-allowed outline-none shadow-inner">
                    <input type="hidden" name="displayname" value="{{ session['displayname'] }}">
                    <p class="text-[10px] text-amber-500 mt-2 ml-1 font-bold uppercase italic">* ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Admin
                        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠</p>
                    {% endif %}
                </div>

                <div>
                    <label class="block text-[10px] font-bold text-rose-400 uppercase tracking-widest mb-1 ml-1">New
                        Password (‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà)</label>
                    <input type="password" name="password" placeholder="‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô"
                        class="w-full border border-slate-200 rounded-2xl p-4 outline-none focus:ring-4 focus:ring-rose-100 bg-white transition-all font-medium">
                </div>

                <button type="submit"
                    class="w-full bg-indigo-600 text-white font-bold py-5 mt-4 rounded-2xl hover:bg-indigo-700 shadow-xl transform active:scale-95 transition-all uppercase tracking-widest text-sm">
                    üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
                </button>
            </form>
        </div>
    </div>

    <script>
        function toggleDropdown() { document.getElementById('user-menu').classList.toggle('hidden'); }
        window.onclick = function (e) { if (!e.target.closest('.relative')) document.getElementById('user-menu').classList.add('hidden'); }
    </script>
</body>

</html>